#!/bin/bash

DOCKER="ubuntu-python-rewind"

ITER_MAX=10
ITER_CNT=0

REQUESTS=(
"mst"
"mst"
"pyaes"
"pagerank"
"mst"
"mst"
"mst"
"float"
"matmul"
"bfs"
"chameleon"
"float"
"bfs"
"linpack"
"pagerank"
"bfs"
"float"
"matmul"
"linpack"
"mst"
"linpack"
"linpack"
"pyaes"
"chameleon"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"bfs"
"pyaes"
"float"
"chameleon"
"pagerank"
"float"
"pyaes"
"bfs"
"bfs"
"mst"
"pyaes"
"chameleon"
"float"
"matmul"
"bfs"
"mst"
"bfs"
"mst"
"float"
"float"
"bfs"
"mst"
"bfs"
"bfs"
"pyaes"
"float"
"float"
"float"
"chameleon"
"bfs"
"matmul"
"mst"
"bfs"
"linpack"
"bfs"
"pagerank"
"mst"
"mst"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"float"
"bfs"
"mst"
"bfs"
"float"
"float"
"bfs"
"mst"
"bfs"
"pyaes"
"float"
"matmul"
"bfs"
"mst"
"mst"
"bfs"
"float"
"float"
"mst"
"matmul"
"bfs"
"float"
"bfs"
"pagerank"
"mst"
"mst"
"mst"
"bfs"
"float"
"linpack"
"matmul"
"linpack"
"chameleon"
"pyaes"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"float"
"float"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"bfs"
"mst"
"float"
"bfs"
"mst"
"bfs"
"float"
"float"
"mst"
"bfs"
"bfs"
"pyaes"
"float"
"matmul"
"mst"
"bfs"
"matmul"
"bfs"
"chameleon"
"linpack"
"bfs"
"mst"
"pagerank"
"mst"
"chameleon"
"mst"
"float"
"float"
"float"
"bfs"
"pyaes"
"float"
"bfs"
"float"
"bfs"
"mst"
"float"
"matmul"
"bfs"
"bfs"
"mst"
"mst"
"pyaes"
"float"
"float"
"bfs"
"mst"
"bfs"
"float"
"mst"
"bfs"
"mst"
"pagerank"
"matmul"
"chameleon"
"bfs"
"linpack"
"mst"
"float"
"bfs"
"float"
"mst"
"float"
"linpack"
"matmul"
"pyaes"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"float"
"matmul"
"bfs"
"mst"
"float"
"float"
"mst"
"bfs"
"bfs"
"mst"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"mst"
"bfs"
"bfs"
"chameleon"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"float"
"matmul"
"mst"
"bfs"
"bfs"
"mst"
"pyaes"
"float"
"float"
"linpack"
"pagerank"
"bfs"
"mst"
"bfs"
"float"
"chameleon"
"bfs"
"bfs"
"pyaes"
"chameleon"
"chameleon"
"pagerank"
"bfs"
"float"
"linpack"
"bfs"
"matmul"
"float"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"chameleon"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"matmul"
"bfs"
"mst"
"mst"
"bfs"
"float"
"float"
"mst"
"bfs"
"bfs"
"pyaes"
"bfs"
"chameleon"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"linpack"
"float"
"bfs"
"matmul"
"bfs"
"mst"
"bfs"
"bfs"
"float"
"float"
"float"
"matmul"
"pyaes"
"pagerank"
"bfs"
"mst"
"bfs"
"pagerank"
"bfs"
"linpack"
"matmul"
"float"
"chameleon"
"mst"
"float"
"linpack"
"float"
"mst"
"chameleon"
"linpack"
"matmul"
"pyaes"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"matmul"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"float"
"bfs"
"float"
"float"
"mst"
"bfs"
"bfs"
"mst"
"bfs"
"pyaes"
"float"
"matmul"
"bfs"
"mst"
"mst"
"bfs"
"float"
"bfs"
"chameleon"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"float"
"mst"
"bfs"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"pagerank"
"pyaes"
"float"
"bfs"
"matmul"
"mst"
"chameleon"
"bfs"
"linpack"
"pagerank"
"float"
"matmul"
"bfs"
"mst"
"mst"
"bfs"
"pyaes"
"float"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"linpack"
"bfs"
"matmul"
"bfs"
"float"
"bfs"
"mst"
"bfs"
"float"
"mst"
"bfs"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"bfs"
"mst"
"bfs"
"mst"
"float"
"bfs"
"mst"
"pyaes"
"mst"
"bfs"
"pagerank"
"pagerank"
"bfs"
"float"
"linpack"
"linpack"
"matmul"
"chameleon"
"float"
"matmul"
"matmul"
"pyaes"
"float"
"float"
"bfs"
"bfs"
"bfs"
"float"
"float"
"bfs"
"mst"
"matmul"
"mst"
"bfs"
"bfs"
"mst"
"pyaes"
"float"
"bfs"
"mst"
"bfs"
"float"
"bfs"
"bfs"
"float"
"float"
"bfs"
"mst"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"pyaes"
"bfs"
"pagerank"
"mst"
"pagerank"
"chameleon"
"mst"
"float"
"bfs"
"linpack"
"matmul"
"chameleon"
"bfs"
"float"
"bfs"
"pyaes"
"float"
"bfs"
"bfs"
"float"
"mst"
"bfs"
"bfs"
"mst"
"bfs"
"chameleon"
"float"
"bfs"
"matmul"
"mst"
"bfs"
"mst"
"bfs"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"mst"
"bfs"
"float"
"float"
"pagerank"
"bfs"
"linpack"
"bfs"
"chameleon"
"float"
"mst"
"matmul"
"bfs"
"pyaes"
"mst"
"pagerank"
"linpack"
"float"
"matmul"
"pyaes"
"float"
"matmul"
"bfs"
"mst"
"mst"
"bfs"
"float"
"float"
"bfs"
"bfs"
"mst"
"pyaes"
"float"
"float"
"bfs"
"float"
"mst"
"bfs"
"float"
"matmul"
"bfs"
"mst"
"bfs"
"mst"
"pyaes"
"float"
"bfs"
"pagerank"
"pyaes"
"bfs"
"mst"
"linpack"
"matmul"
"chameleon"
"pagerank"
"float"
"bfs"
"float"
"float"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"bfs"
"mst"
"mst"
"bfs"
"float"
"mst"
"bfs"
"bfs"
"pyaes"
"float"
"float"
"float"
"bfs"
"bfs"
"mst"
"float"
"matmul"
"bfs"
"pagerank"
"pagerank"
"chameleon"
"matmul"
"float"
"linpack"
"bfs"
"float"
"pyaes"
"mst"
"linpack"
"mst"
"float"
"chameleon"
"pagerank"
"bfs"
"linpack"
"mst"
"pyaes"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"bfs"
"float"
"float"
"bfs"
"pyaes"
"float"
"matmul"
"bfs"
"mst"
"float"
"float"
"bfs"
"pyaes"
"float"
"chameleon"
"bfs"
"float"
"pagerank"
"bfs"
"pagerank"
"bfs"
"float"
"chameleon"
"matmul"
"linpack"
"pyaes"
"pyaes"
"bfs"
"chameleon"
"chameleon"
"bfs"
"float"
"bfs"
"linpack"
"float"
"bfs"
"bfs"
"matmul"
"bfs"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"bfs"
"float"
"float"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"bfs"
"mst"
"chameleon"
"float"
"bfs"
"pagerank"
"pagerank"
"pyaes"
"mst"
"linpack"
"float"
"linpack"
"matmul"
"float"
"bfs"
"chameleon"
"pyaes"
"float"
"float"
"bfs"
"float"
"chameleon"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"float"
"bfs"
"float"
"float"
"bfs"
"pyaes"
"float"
"matmul"
"mst"
"bfs"
"pagerank"
"pagerank"
"matmul"
"linpack"
"bfs"
"float"
"chameleon"
"pyaes"
"chameleon"
"float"
"float"
"bfs"
"pyaes"
"float"
"chameleon"
"float"
"bfs"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"float"
"bfs"
"float"
"pagerank"
"pagerank"
"pyaes"
"bfs"
"linpack"
"float"
"float"
"linpack"
"chameleon"
"bfs"
"matmul"
"pyaes"
"float"
"matmul"
"float"
"bfs"
"mst"
"float"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"float"
"pagerank"
"linpack"
"bfs"
"float"
"matmul"
"bfs"
"chameleon"
"pagerank"
"pyaes"
"float"
"float"
"bfs"
"pyaes"
"float"
"bfs"
"matmul"
"mst"
"bfs"
"matmul"
"float"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"float"
"float"
"matmul"
"bfs"
"pagerank"
"mst"
"chameleon"
"bfs"
"linpack"
"linpack"
"float"
"linpack"
"matmul"
"float"
"chameleon"
"bfs"
"pyaes"
"float"
"float"
"float"
"bfs"
"float"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"bfs"
"mst"
"float"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"linpack"
"float"
"bfs"
"pagerank"
"bfs"
"chameleon"
"float"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"bfs"
"float"
"chameleon"
"float"
"bfs"
"pyaes"
"float"
"float"
"matmul"
"bfs"
"mst"
"float"
"bfs"
"pagerank"
"linpack"
"matmul"
"float"
"bfs"
"chameleon"
"linpack"
"float"
"pyaes"
"pyaes"
"float"
"matmul"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"float"
"bfs"
"float"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"bfs"
"float"
"float"
"bfs"
"pyaes"
"float"
"float"
"float"
"matmul"
"pagerank"
"bfs"
"mst"
"linpack"
"float"
"matmul"
"bfs"
"chameleon"
"pyaes"
"float"
"bfs"
"pyaes"
"float"
"float"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"matmul"
"pagerank"
"pagerank"
"bfs"
"pagerank"
"mst"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pyaes"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"chameleon"
"bfs"
"float"
"float"
"bfs"
"pagerank"
"pyaes"
"linpack"
"float"
"linpack"
"float"
"chameleon"
"matmul"
"bfs"
"pyaes"
"matmul"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"matmul"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"mst"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pyaes"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"chameleon"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"pagerank"
"pagerank"
"float"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"pagerank"
"chameleon"
"bfs"
"linpack"
"float"
"matmul"
"pyaes"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"bfs"
"pyaes"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"matmul"
"bfs"
"mst"
"pyaes"
"chameleon"
"pagerank"
"float"
"pyaes"
"bfs"
"chameleon"
"pagerank"
"pyaes"
"pagerank"
"float"
"float"
"pyaes"
"bfs"
"chameleon"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"matmul"
"mst"
"pyaes"
"bfs"
"linpack"
"pyaes"
"pagerank"
"matmul"
"bfs"
"float"
"linpack"
"float"
"chameleon"
"mst"
"linpack"
"float"
"chameleon"
"matmul"
"bfs"
"mst"
"linpack"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pyaes"
"pagerank"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"bfs"
"bfs"
"bfs"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"matmul"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pyaes"
"chameleon"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"bfs"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pyaes"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pyaes"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"chameleon"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"matmul"
"pagerank"
"pagerank"
"pyaes"
"bfs"
"mst"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pagerank"
"chameleon"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"float"
"pyaes"
"pagerank"
"chameleon"
"bfs"
"pyaes"
"pagerank"
"float"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
"pagerank"
)

while [ ${ITER_CNT} -lt ${ITER_MAX} ]
do
	TIME=`date +%H:%M:%S`
	echo "######################### ${TIME}, ${ITER_CNT} ##########################"

	# update function
	wsk action update --memory 64 --timeout 3000000 ${DOCKER}-float-${ITER_CNT} ../workloads/float.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 128 --timeout 3000000 ${DOCKER}-linpack-${ITER_CNT} ../workloads/linpack.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 128 --timeout 3000000 ${DOCKER}-matmul-${ITER_CNT} ../workloads/matmul.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 64 --timeout 3000000 ${DOCKER}-bfs-${ITER_CNT} ../workloads/bfs.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 64 --timeout 3000000 ${DOCKER}-mst-${ITER_CNT} ../workloads/mst.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 128 --timeout 3000000 ${DOCKER}-pagerank-${ITER_CNT} ../workloads/pagerank.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 64 --timeout 3000000 ${DOCKER}-pyaes-${ITER_CNT} ../workloads/pyaes.py --docker $1/${DOCKER}
	sleep 2
	wsk action update --memory 64 --timeout 3000000 ${DOCKER}-chameleon-${ITER_CNT} ../workloads/chameleon.py --docker $1/${DOCKER}
	sleep 2

	date +%s%N >> ./results/${DOCKER}_${ITER_CNT}.txt
	for WORK in ${REQUESTS[@]}
	do
		# invoke function
		IDS=`wsk action invoke ${DOCKER}-${WORK}-${ITER_CNT}`
		IDS=$(echo $IDS | cut -d " " -f 6)
		echo $IDS >> ids.txt
	done

	sleep 800

	while read LINE
	do
		wsk activation result $LINE >> ./results/${DOCKER}_${ITER_CNT}.txt
	done < ids.txt

	sleep 2

	rm ids.txt

	for WORK in float linpack matmul bfs mst pagerank pyaes chameleon
	do
		# delete function
		wsk action delete ${DOCKER}-${WORK}-${ITER_CNT}
		sleep 2
	done

	start_time=`head -n 1 ${DOCKER}_${ITER_CNT}.txt`
	temp=`tail -n 3 ${DOCKER}_${ITER_CNT}.txt`
	temp=`echo $temp | cut -d " " -f 2`
	end_time=`echo $temp | cut -d "," -f 1`

	total_time=`expr $end_time - $start_time`
	throughput=`echo $total_time | awk '{printf "%.6f", 2000000000000 / $1}'`

	echo "(Iteration ${ITER_CNT}) Throughput: $throughput requests/second"

	ITER_CNT=$(($ITER_CNT+1))

	sleep 2
done
